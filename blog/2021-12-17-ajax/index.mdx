---
slug: AJAX
title: ä» 0 å®ç°ä¸€ä¸ªå‰ç«¯ç›‘æ§ SDK
authors: [shuxin]
tags: [ç›‘æ§, æ€§èƒ½, js]
hide_table_of_contents: true
---

![Docusaurus Plushie](./docusaurus-plushie-banner.jpeg)

import TOCInline from "@theme/TOCInline";
import { Image, Card, Alert, Divider } from "antd";
import errorImg from "../assets/athena-error.jpg";
import performImg from "../assets/window.performance.timing.png";
import archImg from "../assets/arch-sdk.png";
import apiImg from "./API.jpg";
import xhrMethodImg from "../assets/xhr-method.jpg";
import fetchImg from "../assets/fetch.jpg";
import XMLHttpRequestImg from "../assets/XMLHttpRequest.jpg";
import XHRHooksImg from "../assets/XHR-HOOKS.jpg";

import "antd/dist/antd.css";

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

Hello å¤§å®¶å¥½~~ï¼Œä»Šå¤©ç»™å¤§å®¶å¸¦æ¥çš„åˆ†äº«æ˜¯å…³äºå¦‚ä½•ä»é›¶å®ç°ä¸€ä¸ªå‰ç«¯ç›‘æ§ SDK,ï¼ˆå‰æ®µæ—¶é—´å‚ä¸äº†æ€§èƒ½ç›‘æ§å¹³å°çš„å…±å»ºï¼Œæœ‰ä¸€äº›è‡ªå·±çš„å¿ƒå¾—ï¼Œæ•…æ­¤åˆ†äº«å‡ºæ¥ï¼Œå…±åŒè¿›æ­¥ï¼‰

æ¥ä¸‹æ¥æˆ‘å°†é€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤å¸¦å¤§å®¶å®Œæˆå‰ç«¯ç›‘æ§ SDK

<TOCInline toc={toc} />

### ä¸€ã€ ä¸ºä»€ä¹ˆè¦åšå‰ç«¯ç›‘æ§ï¼Œéƒ½éœ€è¦ç›‘æ§ä»€ä¹ˆï¼Ÿ

#### åœºæ™¯ï¼š

1. å®¢æˆ·æ‰‹æœºç«¯ç™½å±äº†ï¼Œç³»ç»Ÿæ— æ³•ä½¿ç”¨ï¼Œç›´åˆ°é¢†å¯¼æ‰¾åˆ°ä½ ï¼Œä½ ç´§å¼ çš„æ±—éƒ½ä¸‹æ¥äº†ï¼Œç„¦æ€¥çš„æŸ¥ç€ä»£ç ï¼Œä½†æ²¡æœ‰å¤´ç»ª
2. ç‚¹å‡»æŸä¸ªæŒ‰é’®åœ¨æ‰‹æœºç«¯çš„æ‰§è¡Œé€»è¾‘å­˜åœ¨å…¼å®¹æ€§ï¼Œè€Œä½ ç¼ºä¸çŸ¥é“ï¼Œå¯¼è‡´éƒ¨åˆ†å®¢æˆ·æµå¤±
3. æ¥å£è¯·æ±‚è€—æ—¶è¾ƒå¤šï¼Œç”¨æˆ·ä½“éªŒå·®ï¼Œæˆ‘ä»¬å´å…¨ç„¶ä¸çŸ¥

#### éƒ½éœ€è¦åšå“ªäº›ç›‘æ§

- âœï¸ å‰ç«¯é”™è¯¯
- ğŸ”§ é¡µé¢æ€§èƒ½
- âœï¸ API æ€§èƒ½

**çŸ¥é“äº†ä¸ºä»€ä¹ˆè¦åšç›‘æ§ï¼Œä»¥åŠè¦ç›‘æ§ ä»€ä¹ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹è¦è¦å¦‚ä½•å®ç°ï¼Œå„ç±»ç›‘æ§å‘¢**

<Divider />

### äºŒã€ å¦‚ä½•å®ç°å„ç±»ç›‘æ§ï¼Ÿ

#### 1ã€å‰ç«¯é”™è¯¯ç›‘æ§

<Image width={"100%"} src={errorImg} />

<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‰ç«¯é”™è¯¯æ•è·æ–¹å¼ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸Šå››å¤§ç±»ï¼Œ</p>
<span style={{ fontSize: "20px", color: "#9A0680" }}>ç¬¬ä¸€ç§</span>
æ˜¯æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿‡çš„ JS è¿è¡Œæ—¶é”™è¯¯ï¼Œ ä¸€èˆ¬æˆ‘ä»¬é‡‡ç”¨ window.onerror
æ–¹æ³•å°±å¯ä»¥å¯¹å…¶è¿›è¡Œæ•è·ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å› 5 ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼Œ

- messageï¼šé”™è¯¯ä¿¡æ¯ï¼ˆå­—ç¬¦ä¸²ï¼‰ã€‚å¯ç”¨äº HTML onerror=""å¤„ç†ç¨‹åºä¸­çš„ eventã€‚
- sourceï¼šå‘ç”Ÿé”™è¯¯çš„è„šæœ¬ URLï¼ˆå­—ç¬¦ä¸²ï¼‰
- linenoï¼šå‘ç”Ÿé”™è¯¯çš„è¡Œå·ï¼ˆæ•°å­—ï¼‰
- colnoï¼šå‘ç”Ÿé”™è¯¯çš„åˆ—å·ï¼ˆæ•°å­—ï¼‰
- errorï¼šError å¯¹è±¡ï¼ˆå¯¹è±¡ï¼‰

å¦ç§è¿è¡Œæ—¶é”™è¯¯æ˜¯ç”¨æˆ·åˆ©ç”¨ console.error æ‰“å°å‡ºæ¥çš„æˆ‘ä»¬ä¹Ÿè¦è¿›è¡Œæ‹¦æˆªæ•è·ã€‚

<p>
  <span style={{ fontSize: "20px", color: "#9A0680" }}>ç¬¬äºŒç§</span>{" "}
  æ˜¯é¡µé¢ä¸­èµ„æºï¼ˆè¯¸å¦‚å›¾ç‰‡img,è„šæœ¬scriptï¼‰åŠ è½½é”™è¯¯ï¼Œæ‰¾ä¸åˆ°èµ„æºå•¦ï¼Œèµ„æºåŠ è½½è¶…æ—¶å•¦ï¼Œå¯ä»¥é€šè¿‡
  window.addEventListener('error', function(event) {}) è¿›è¡Œæ•è·ï¼Œè¿”å›çš„event
  ä¸­ï¼ŒåŒ…å«
</p>

- localName èµ„æºåç§°
- type èµ„æºç±»å‹
- src èµ„æºæºåœ°å€

<p>
  <span style={{ fontSize: "20px", color: "#9A0680" }}>ç¬¬ä¸‰ç§</span>
  æ˜¯å½“Promise è¢« reject ä¸”æ²¡æœ‰ reject å¤„ç†å™¨çš„æ—¶å€™ï¼Œä¼šè§¦å‘ unhandledrejection äº‹ä»¶ã€‚å¯ä»¥é€šè¿‡
  window.addEventListener('unhandledrejection', function(event) {}) è¿›è¡Œæ•è·ï¼Œè¿”å›çš„event
  ä¸­ï¼ŒåŒ…å«
</p>

- reason reject çš„åŸå› 

<p>
  <span style={{ fontSize: "20px", color: "#9A0680" }}>ç¬¬å››ç§</span>
  æ˜¯å¼‚æ­¥è¯·æ±‚çš„é”™è¯¯ï¼Œæµè§ˆå™¨ä¸­å‘é€ajax è¯·æ±‚å…±æœ‰ä¸¤ç§æ–¹å¼åˆ†åˆ«æ˜¯ XMLHttpRequest å’Œ Fetch,
  æ‰€ä»¥ç›¸åº”çš„ä¹Ÿåˆ†ä¸¤ç§æ•è·ç±»å‹ã€‚
</p>

- å¯¹äº XHR æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬å®ƒçš„ onerror äº‹ä»¶æ¥æ•è·å¼‚å¸¸é”™è¯¯ï¼Œé€šè¿‡ç›‘å¬ onabort
  äº‹ä»¶æ¥ç›‘å¬ä¸­æ–­è¯·æ±‚å¼‚å¸¸ï¼Œå¦‚æœè¯·æ±‚é¡ºåˆ©è¿”å›ï¼Œæˆ‘ä»¬é€šè¿‡åˆ¤æ–­è¿”å›çš„çŠ¶æ€ç  status æ˜¯å¦æ˜¯å°äº 200
  æˆ–è€…å¤§äºç­‰äº 300 æ¥åˆ¤æ–­è¿™æ¬¡è¯·æ±‚æ˜¯å¦å¤±è´¥ã€‚
- å¯¹äº Fetch æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™ catch æ–¹æ³•æ¥è·å¾—å‘ç”Ÿçš„é”™è¯¯ï¼Œæˆ–è€…åˆ¤æ–­è¿”å›çš„ response.ok
  æ˜¯å¦ä¸º false æ¥è¿›è¡Œé”™è¯¯ä¸ŠæŠ¥

#### 2ã€é¡µé¢æ€§èƒ½ç›‘æ§

<Image width={"100%"} src={performImg} />

<Paragraph>
  å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“é¡µé¢load ä¹‹åæˆ‘ä»¬é€šè¿‡è°ƒç”¨window ä¸Šçš„performance.timing
  å¯¹è±¡ä¸Šçš„ç›¸å…³å±æ€§è¿›è¡Œè®¡ç®—ï¼Œå°±å¯ä»¥è·å¾—æˆ‘ä»¬æƒ³è¦çš„ç›¸å…³æ—¶é—´
</Paragraph>

#### 3ã€API æ€§èƒ½ç›‘æ§

<Image width={"100%"} src={apiImg} />
å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹
<p>
  <span style={{ fontSize: "20px", color: "#9A0680" }}>ç¬¬ä¸€ç§</span>
  æƒ…å†µï¼Œé€šè¿‡é‡å†™XMLHttpRequestå¯¹è±¡çš„å®ç°é€»è¾‘æ¥è¾¾åˆ°ç›‘å¬ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡é‡å†™open å±æ€§æ¥è¿›è¡Œæ³¨å†Œè¯·æ±‚åŸºæœ¬ä¿¡æ¯ï¼Œç„¶åé‡å†™ï¼Œonreadystatechange,onload,å’Œonloaded
  æ¥ç›‘å¬è¯·æ±‚æˆåŠŸè¿”å›ï¼Œ æ¥ä¸‹æ¥çœ‹
</p>
<p>
  <span style={{ fontSize: "20px", color: "#9A0680" }}> ç¬¬äºŒç§</span>
  æƒ…å†µFetch,é€šè¿‡ç›‘å¬then æ–¹æ³•è¿”å›çš„response ,æ¥è·å–status å’Œ è·å–å“åº”å¤§å°
</p>

#### ä¸ŠæŠ¥æ—¶æœºçš„æ€è€ƒ

:::info æ€è€ƒé¢˜

<p>1ã€æˆ‘ä»¬æ¯æ¬¡ä¸ŠæŠ¥éƒ½éœ€è¦å‘é€è¯·æ±‚å—ï¼Ÿ</p>
<p>2ã€å¦‚æœéœ€è¦è¿›è¡Œåˆå¹¶ï¼Œå¦‚ä½•è¿›è¡Œä¸ŠæŠ¥åˆå¹¶å‘¢ï¼Ÿ</p>

:::

**ä¼˜åŒ–å‰ï¼š**

![common-report](../assets/common-report.png)

:::tip è§£å†³æ–¹æ¡ˆ

<p>1ã€ä¸ŠæŠ¥åœºæ™¯åˆ†ä¸ºä¸¤ç±»ï¼Œåˆå§‹åŒ–é¡µé¢æ—¶ï¼Œå’Œåç»­ajax æ“ä½œ</p>
<p>
  2ã€åˆå§‹åŒ–é¡µé¢ï¼šå¯¹ajax è¯·æ±‚ï¼Œé”™è¯¯ä¿¡æ¯ï¼Œåˆ†åˆ«è¿›è¡Œç¼“å­˜ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…ï¼Œç›´åˆ°æ‰€æœ‰ajax
  è¯·æ±‚ éƒ½å®Œæˆä»¥åŠé¡µé¢loadï¼Œæ‰è¿›è¡Œæ•´ä½“ä¸ŠæŠ¥
</p>
<p>
  3ã€åç»­ajax æ“ä½œï¼šå¯¹ajax
  è¯·æ±‚ï¼Œé”™è¯¯ä¿¡æ¯ï¼Œåˆ†åˆ«è¿›è¡Œç¼“å­˜ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…ï¼Œç›´åˆ°æ‰€æœ‰ajax è¯·æ±‚
  éƒ½å®Œæˆï¼Œæ‰è¿›è¡Œæ•´ä½“ä¸ŠæŠ¥
</p>

:::

**ä¼˜åŒ–åï¼š**

![common-report](../assets/optim-report.png)

### ä¸‰ã€ æ•°æ®çš„ä¸ŠæŠ¥å’Œæ”¶é›†

**é¦–å…ˆä¸ŠæŠ¥æ–¹å¼åˆ†ä¸ºä¸¤å¤§ç±»**

- SDK ç›‘å¬ç‰¹å®šäº‹ä»¶ï¼Œè¿›è¡Œä¸ŠæŠ¥
- ç”¨æˆ·é€šè¿‡è‡ªå·±çš„æŠ€æœ¯æ‰‹æ®µï¼ˆä¾‹å¦‚ try,catchï¼ŒReact ErrorBoundary ï¼‰,é€šè¿‡è°ƒç”¨ athena.addError(ErrorOptions); æ¥ä¸ŠæŠ¥

**ä¸ŠæŠ¥ç±»å‹åˆ†ä¸ºä¸‰å¤§ç±»**

1. PAGE = 1 //é¡µé¢çº§æ€§èƒ½ä¸ŠæŠ¥

2. AJAX = 2 //é¡µé¢ API æ€§èƒ½ä¸ŠæŠ¥

3. ERROR = 3 //é¡µé¢å†…é”™è¯¯ä¿¡æ¯ä¸ŠæŠ¥

:::info

æ¥ä¸‹æ¥æˆ‘ä»¬å°±é’ˆå¯¹**å…·ä½“åœºæ™¯**è¿›è¡Œåˆ†æ

:::

#### åœºæ™¯ä¸€ï¼šé¡µé¢çº§æ€§èƒ½ä¸ŠæŠ¥

<Tabs>
<TabItem value="apple" label="ä¸ŠæŠ¥æ–¹å¼" default>

<Card
  title="é€šè¿‡ç›‘å¬ loadäº‹ä»¶ï¼ˆæ ‡è¯†é¡µé¢èµ„æºå·²ç»åŠ è½½å®Œæˆï¼‰æ¥è¿›è¡Œä¸ŠæŠ¥ï¼Œ
  ä»¥åŠå°†ç›¸å…³é™æ€èµ„æºè¿›è¡Œä¸ŠæŠ¥"
>
  <p> ğŸ 1ã€ performance.timing</p>
  <p> ğŸ¥” 2ã€ performance.getEntriesByType('resource')</p>
</Card>

</TabItem>

<TabItem value="orange" label="å…³é”®ä»£ç è§£æ">

```javascript
window.addEventListener("load", onLoadEvent, false);
const onLoadEvent = function () {
  reportToLanding(REPORT_TYPE.PAGE);
};
function reportToLanding({ type }) {
  const resourceList = filterResource(options.filterUrl || [], options);
  const performance = performPage();

  const params = extend(true, params, {
    preUrl:
      document.referrer && document.referrer !== window.location.href
        ? document.referrer
        : "",
    performance: performPage(),
    resourceList: resourceList,
  });
  // å¼€å§‹ä¸ŠæŠ¥

  window.fetch(options.domain, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    report: true,
    body: jsonToString(params),
  });
}

export function performPage() {
  if (!window.performance) return;
  let timing = window.performance.timing;
  return {
    dnst: timing.domainLookupEnd - timing.domainLookupStart || 0, // DNSè§£ææ—¶é—´
    tcpt: timing.connectEnd - timing.connectStart || 0, // TCPå»ºç«‹æ—¶é—´
    wit: timing.responseStart - timing.navigationStart || 0, // ç™½å±æ—¶é—´
    domt: timing.domContentLoadedEventEnd - timing.navigationStart || 0, // domæ¸²æŸ“å®Œæˆæ—¶é—´
    lodt: timing.loadEventEnd - timing.navigationStart || 0, // é¡µé¢onloadæ—¶é—´
    radt: timing.fetchStart - timing.navigationStart || 0, // é¡µé¢å‡†å¤‡æ—¶é—´
    rdit: timing.redirectEnd - timing.redirectStart || 0, // é¡µé¢é‡å®šå‘æ—¶é—´
    uodt: timing.unloadEventEnd - timing.unloadEventStart || 0, // unloadæ—¶é—´
    reqt: timing.responseEnd - timing.requestStart || 0, // requestè¯·æ±‚è€—æ—¶
    andt: timing.domComplete - timing.domInteractive || 0, // é¡µé¢è§£ædomè€—æ—¶
  };
}
export function filterResource(filterList: any[], options: OptionsTypes) {
  const resourceList: any[] = performResource(options);

  return resourceList.filter((item: any) => {
    return (
      filterList.filter((filterUrl: any) => {
        return item.name.indexOf(filterUrl) > -1;
      }).length === 0
    );
  });
}
function performResource(options: OptionsTypes) {
  if (!window.performance || !window.performance.getEntries) return [];
  let resource: any[] = window.performance.getEntriesByType("resource");
  let resourceList: any[] = [];
  if (!resource || resource.length === 0) return resourceList;
  resource.forEach((item) => {
    if (
      !options.isAjax &&
      (item.initiatorType === "xmlhttprequest" ||
        item.initiatorType === "fetchrequest")
    )
      return;
    if (
      !options.isResource &&
      item.initiatorType !== "xmlhttprequest" &&
      item.initiatorType !== "fetchrequest"
    )
      return;
    const specification = {
      name: item.name,
      method: "GET",
      type: item.initiatorType,
      duration: item.duration.toFixed(2) || 0,
      decodedBodySize: item.decodedBodySize || 0,
      nextHopProtocol: item.nextHopProtocol,
      options: "",
    };
    const url = item.name ? item.name.split("?")[0] : "";
    // ------>TODO
    const ajaxCache = store.ajaxCache[url] || "";
    if (ajaxCache) {
      specification.method = ajaxCache.method || "GET";
      specification.type = ajaxCache.type || specification.type;
      specification.decodedBodySize =
        specification.decodedBodySize || ajaxCache.decodedBodySize;
      specification.options = ajaxCache.options;
    }
    resourceList.push(specification);
  });

  return resourceList;
}
```

</TabItem>
</Tabs>

#### åœºæ™¯äºŒï¼šé¡µé¢é”™è¯¯ä¸ŠæŠ¥

<Tabs>
  <TabItem value="apple" label="ä¸ŠæŠ¥æ–¹å¼" default>

  <Card title="é€šè¿‡ç›‘å¬ä¸€ç³»åˆ—å…¨å±€äº‹ä»¶">
    <p>ğŸ  1ã€ åˆ©ç”¨ window.addEventListener('error', listenErrorEvent, true); æ•è· img,script,css,jsonp
    ç›¸å…³é”™è¯¯
    </p>
    <p> ğŸŒ  2ã€ é‡å†™ window.onerror ç”¨äºæ•è·è¿è¡Œæ—¶é”™è¯¯</p>
    <p>
    ğŸ‡  3ã€ å½“ Promise è¢« reject ä¸”æ²¡æœ‰ reject å¤„ç†å™¨çš„æ—¶å€™ï¼Œä¼šè§¦å‘ unhandledrejection
    äº‹ä»¶ã€‚window.addEventListener('unhandledrejection', unhandledrejectionEvent);
    </p>
    <p> ğŸ‰  4ã€ é‡å†™console.error æ–¹æ³•è°ƒç”¨</p>

  </Card>

  </TabItem>
  <TabItem value="orange" label="å…³é”®ä»£ç è§£æ">

<Alert message="1ã€èµ„æºé”™è¯¯" type="info" showIcon />

```javascript
window.addEventListener("error", listenErrorEvent, true);
const mechanicsError = { t: "", n: "js", msg: "", data: {} };
const listenErrorEvent = function (ex: any) {
  let reportParams = extend(true, {}, mechanicsError);
  reportParams.n = "resource";
  reportParams.t = new Date().getTime();
  reportParams.msg = ex.target.localName + " is load error";
  reportParams.method = "GET";
  reportParams.data = {
    target: ex.target.localName,
    type: ex.type,
    resourceUrl: ex.target.href || ex.target.src,
  };
  if (ex.target !== window) {
    store.errorList.push(reportParams);
    setTimeout(() => {
      reportToLanding(REPORT_TYPE.ERROR);
    }, ErrorReportDelayTime);
  }
};
```

<Alert message="2ã€jsè¿è¡Œæ—¶é”™è¯¯" type="success" showIcon />

```javascript
window.onerror = onErrorEvent;
const onErrorEvent = function (
  msg: any,
  _url: any,
  line: any,
  col: any,
  error: any
) {
  let reportParams = extend(true, {}, mechanicsError);

  reportParams.msg = error && error.stack ? error.stack.toString() : msg;
  reportParams.method = "GET";
  reportParams.data = {
    resourceUrl: _url,
    line: line,
    col: col || 0,
  };
  reportParams.t = new Date().getTime();
  store.errorList.push(reportParams);
  setTimeout(() => {
    reportToLanding(REPORT_TYPE.ERROR);
  }, ErrorReportDelayTime);
};
```

<Alert message="3ã€æœªå¤„ç†çš„Promise çš„reject" type="warning" showIcon />

```javascript
window.addEventListener("unhandledrejection", unhandledrejectionEvent);
const unhandledrejectionEvent = function (ex: any) {
  try {
    const error = ex && ex.reason;
    const message = error.message || "";
    const stack = error.stack || "";
    // Processing error
    let resourceUrl, col, line;
    let errs = stack.match(/\(.+?\)/);
    if (errs && errs.length) errs = errs[0];
    errs = errs?.replace(/\w.+[js|html]/g, ($1: any) => {
      resourceUrl = $1;
      return "";
    });
    errs = errs?.split(":");
    if (errs && errs.length > 1) line = parseInt(errs[1] || 0);
    col = parseInt(errs[2] || 0);
    let reportParams = extend(true, {}, mechanicsError);
    reportParams.msg = message || error;
    reportParams.method = "GET";
    reportParams.n = "unhandledrejection";
    reportParams.t = new Date().getTime();
    reportParams.data = {
      resourceUrl: resourceUrl,
      line: line,
      col: col,
      stack: stack,
    };
    store.errorList.push(reportParams);
    setTimeout(() => {
      reportToLanding(REPORT_TYPE.ERROR);
    }, ErrorReportDelayTime);
  } catch (ex) {
    console.warn("athena", ex);
  }
};
```

<Alert message="4ã€é‡å†™console.error" type="error" showIcon />

```javascript
console.error = rewriteConsoleError();
 const rewriteConsoleError = function() {
    const originalError = console.error;
    return function(args1: any, args2: any, args3: any) {
      const reportParams = extend(true, {}, mechanicsError);
      reportParams.msg = [args1, args2, args3].join('/');
      reportParams.method = 'GET';

      reportParams.t = new Date().getTime();
      reportParams.data = {
        resourceUrl: window.location.href,
        stack: args1?.stack || args1?.message,
      };
      store.errorList.push(reportParams);

      setTimeout(() => {
        reportToLanding(REPORT_TYPE.ERROR);
      }, ErrorReportDelayTime);
      return originalError.apply(console, arguments as any);
    };
  };
```

</TabItem>

</Tabs>

#### åœºæ™¯ä¸‰ï¼šXMLHttpRequest æ€§èƒ½å’Œé”™è¯¯ä¸ŠæŠ¥

<Tabs>
  <TabItem value="apple" label="ä¸ŠæŠ¥æ–¹å¼" default>
    <Card title="é€šè¿‡é‡å†™XMLHttpRequest å¯¹è±¡">
    <p>ğŸ  1ã€ åˆ©ç”¨ window.realXhr = XMLHttpRequest; ç¼“å­˜åŸå§‹XMLHttpRequestå¯¹è±¡
    </p>
    <p> ğŸŒ  2ã€ é‡å†™ XMLHttpRequest å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼Œ </p>
    <p>
    ğŸ‡  3ã€ é‡å†™æ–¹æ³• overwriteMethod ï¼Œé‡å†™å±æ€§ overwriteAttributes
    </p>

  </Card>

XHR ç›¸å…³äº‹ä»¶

<Image width={"100%"} src={xhrMethodImg} />

XHR é‡å†™æµç¨‹å›¾

<Image width={"100%"} src={XMLHttpRequestImg} />

Hooks ç¤ºæ„å›¾

<Image width={"100%"} src={XHRHooksImg} />

  </TabItem>
  <TabItem value="orange" label="å…³é”®ä»£ç è§£æ">

```javascript
    window.realXhr = XMLHttpRequest;
    const hooks = getHooks(reportToLanding, options);
    //@ts-ignore
    XMLHttpRequest = function(this: ProxyXHRType) {
      this._xhr = new window.realXhr();
      for (let attr in this._xhr) {
        let type: string = '';
        try {
          type = typeof this._xhr[attr as XHRField];
        } catch (e) {}
        if (type === 'function') {
          overwriteMethod(attr as XHRField, this, hooks);
        } else {
          overwriteAttributes(attr as XHRField, this, hooks);
        }
      }
    };

const getHooks = (reportToLanding: any, options: OptionsTypes): any => {
  const ajaxResponse = getAjaxResponse(reportToLanding);
  return {
    onreadystatechange: function(proxyXHR: ProxyXHRType) {
      if (proxyXHR.readyState === 4) {
        if ([AjaxStateType.LOADED, AjaxStateType.LOAD].includes(proxyXHR.ajaxStateType)) return;
        proxyXHR.ajaxStateType = AjaxStateType.READYCHANGE;
        const responseURL = proxyXHR._xhr.responseURL ? proxyXHR._xhr.responseURL.split('?')[0] : '';
        if (store.ajaxCache[responseURL]) {
          try {
            if (proxyXHR.response instanceof Blob) {
              store.ajaxCache[responseURL]['decodedBodySize'] = proxyXHR._xhr.response.size;
            } else {
              store.ajaxCache[responseURL]['decodedBodySize'] = proxyXHR._xhr.responseText.length;
            }
            store.ajaxCache[responseURL]['options'] = {
              resourceUrl: proxyXHR._xhr.responseURL,
              text: proxyXHR._xhr.statusText,
              status: proxyXHR._xhr.status,
            };
          } catch (err) {}
        }

        // é”™è¯¯ä¸ŠæŠ¥
        if (proxyXHR.status < 200 || proxyXHR.status > 300) {
          ajaxResponse(proxyXHR, { method: proxyXHR.args.method });
        } else {
          // æˆåŠŸåä¸ŠæŠ¥
          store.ajaxLoad += 1;
          setTimeout(() => {
            reportToLanding(REPORT_TYPE.AJAX);
          }, AjaxReportDelayTime);
        }
      }
    },
    onerror: function(proxyXHR: ProxyXHRType) {
      const params: any = {};
      if (proxyXHR.args) {
        params.method = proxyXHR.args.method;
        params.responseURL = proxyXHR.args.url;
        params.statusText = 'ajax request error';
      }

      ajaxResponse(proxyXHR, params);
    },
    onabort: function(proxyXHR: ProxyXHRType) {
      const params: any = {};
      if (proxyXHR.args) {
        params.method = proxyXHR.args.method;
        params.responseURL = proxyXHR.args.url;
        params.statusText = 'ajax aborted error';
      }

      ajaxResponse(proxyXHR, params);
    },
    onload: function(proxyXHR: ProxyXHRType) {
      if (proxyXHR.readyState === 4) {
        if ([AjaxStateType.LOADED, AjaxStateType.READYCHANGE].includes(proxyXHR.ajaxStateType)) return;
        proxyXHR.ajaxStateType = AjaxStateType.LOAD;
        const responseURL = proxyXHR._xhr.responseURL ? proxyXHR._xhr.responseURL.split('?')[0] : '';
        if (store.ajaxCache[responseURL]) {
          try {
            if (proxyXHR._xhr.response instanceof Blob) {
              store.ajaxCache[responseURL]['decodedBodySize'] = proxyXHR._xhr.response.size;
            } else {
              store.ajaxCache[responseURL]['decodedBodySize'] = proxyXHR._xhr.responseText.length;
            }
            store.ajaxCache[responseURL]['options'] = {
              resourceUrl: proxyXHR._xhr.responseURL,
              text: proxyXHR._xhr.statusText,
              status: proxyXHR._xhr.status,
            };
          } catch (err) {}
        }

        if (proxyXHR.status < 200 || proxyXHR.status > 300) {
          // å‘ç”Ÿé”™è¯¯

          // é”™è¯¯ä¸ŠæŠ¥
          ajaxResponse(proxyXHR, { method: proxyXHR.args.method });
        } else {
          // æˆåŠŸåä¸ŠæŠ¥
          store.ajaxLoad += 1;
          setTimeout(() => {
            reportToLanding(REPORT_TYPE.AJAX);
          }, AjaxReportDelayTime);
        }
      }
    },
    onloadend: function(proxyXHR: ProxyXHRType) {
      if (proxyXHR.readyState === 4) {
        if ([AjaxStateType.LOAD, AjaxStateType.READYCHANGE].includes(proxyXHR.ajaxStateType)) return;
        proxyXHR.ajaxStateType = AjaxStateType.LOADED;
        const responseURL = proxyXHR._xhr.responseURL ? proxyXHR._xhr.responseURL.split('?')[0] : '';
        if (store.ajaxCache[responseURL]) {
          try {
            if (proxyXHR._xhr.response instanceof Blob) {
              store.ajaxCache[responseURL]['decodedBodySize'] = proxyXHR._xhr.response.size;
            } else {
              store.ajaxCache[responseURL]['decodedBodySize'] = proxyXHR._xhr.responseText.length;
            }
            store.ajaxCache[responseURL]['options'] = {
              resourceUrl: proxyXHR._xhr.responseURL,
              text: proxyXHR._xhr.statusText,
              status: proxyXHR._xhr.status,
            };
          } catch (err) {}
        }

        if (proxyXHR.status < 200 || proxyXHR.status > 300) {
          // å‘ç”Ÿé”™è¯¯

          // é”™è¯¯ä¸ŠæŠ¥
          ajaxResponse({ ...proxyXHR }, { method: proxyXHR.args.method });
        } else {
          // æˆåŠŸåä¸ŠæŠ¥
          store.ajaxLoad += 1;
          setTimeout(() => {
            reportToLanding(REPORT_TYPE.AJAX);
          }, AjaxReportDelayTime);
        }
      }
    },
    open: function(this: ProxyXHRType, arg: any) {
      if (options.filterUrl && options.filterUrl.length) {
        let begin = false;
        options.filterUrl.forEach(item => {
          if (arg[1].indexOf(item) !== -1) begin = true;
        });
        if (begin) return;
      }
      this.ajaxStateType = AjaxStateType.NONE;

      let result: ResultType = { url: transformAbsolutePath(arg[1].split('?')[0]), method: arg[0] || 'GET', type: 'xmlhttprequest' };
      this.args = result;

      store.ajaxCache[result.url] = result;
      store.ajaxLength += 1;
    },
  };
};
const overwriteMethod = (funKey: XHRField, proxyXHR: ProxyXHRType, hooks: any) => {
  proxyXHR[funKey] = (...args: []) => {
    // å¦‚æœæœ‰hooks æ‰§è¡Œhooks
    const ret = hooks[funKey] && hooks[funKey].call(proxyXHR, args);
    if (ret) return ret;
    // æ‰§è¡ŒåŸç”Ÿxhrå®ä¾‹ä¸­å¯¹åº”çš„æ–¹æ³•
    const res = proxyXHR._xhr[funKey].apply(proxyXHR._xhr, args);
    return res;
  };
};

const overwriteAttributes = (attrKey: XHRField, proxyXHR: ProxyXHRType, hooks: any) => {
  Object.defineProperty(proxyXHR, attrKey, {
    get: getFactory(attrKey as XHRField, hooks),
    set: setFactory(attrKey as XHRField, hooks),
    enumerable: true,
  });
};
function getFactory(attr: XHRField, hooks: any) {
  return function(this: ProxyXHRType) {
    const proxyAttr = `${attr}${suffixAttr}`;
    var value = this.hasOwnProperty(proxyAttr) ? this[proxyAttr as XHRField] : this._xhr[attr];
    var attrGetterHook = (hooks[attr] || {})['getter'];
    return (attrGetterHook && attrGetterHook(value, this)) || value;
  };
}
function setFactory(attr: XHRField, hooks: any) {
  return function(this: ProxyXHRType, value: any) {
    var xhr: any = this._xhr;
    var proxyXHR = this;
    var hook = hooks[attr];
    const proxyAttr = `${attr}${suffixAttr}`;
    // çœ‹çœ‹å±æ€§æ˜¯ä¸æ˜¯onæ‰“å¤´ å¦‚æœä¸æ˜¯ ç›´æ¥æŒ‚ä¸Šå»
    if (!attr.startsWith('on')) {
      proxyXHR[proxyAttr as XHRField] = value;
      return;
    } else {
      // å¦‚æœæ˜¯ åˆ™çœ‹çœ‹æœ‰æ²¡æœ‰è¦æ‰§è¡Œçš„é’©å­
      if (hook) {
        // å¦‚æœæœ‰ åˆ™åŒ…è£…ä¸€ä¸‹ å…ˆæ‰§è¡Œé’©å­ å†æ‰§è¡Œæœ¬ä½“
        //@ts-ignore
        proxyXHR._xhr[attr as XHRField] = function(...args) {
          // æ‰§è¡Œ
          hooks[attr].call(proxyXHR, proxyXHR, ...args);
          // æ‰§è¡Œå¤–éƒ¨æä¾›çš„æ–¹æ³•
          value.apply(proxyXHR, args);
        };

        return;
      }

      // å¦‚æœæ²¡æœ‰ è´£ç›´æ¥èµ‹å€¼æŒ‚ä¸Šå»
      xhr[attr] = value;
    }
  };
}

// ajaxç»Ÿä¸€ä¸ŠæŠ¥å…¥å£
const getAjaxResponse = (reportToLanding: any) => (proxyXHR: any, error: ErrorType) => {
  let errorValue: any = {};
  errorValue.t = new Date().getTime();
  errorValue.n = 'ajax';
  errorValue.msg = proxyXHR._xhr.responseText || error.statusText || 'ajax request error';
  errorValue.method = proxyXHR.method || error.method;
  errorValue.data = {
    resourceUrl: proxyXHR._xhr.responseURL || error.responseURL,
    text: proxyXHR._xhr.statusText || error.statusText,
    status: proxyXHR._xhr.status,
  };
  store.errorList.push(errorValue);
  store.ajaxLoad += 1;
  setTimeout(() => {
    reportToLanding(REPORT_TYPE.AJAX);
  }, AjaxReportDelayTime);
};
```

  </TabItem>
</Tabs>

#### åœºæ™¯å››ï¼šFetch æ€§èƒ½å’Œé”™è¯¯ä¸ŠæŠ¥

<Tabs>
  <TabItem value="apple" label="ä¸ŠæŠ¥æ–¹å¼" default>
    <Card title="é€šè¿‡é‡å†™fetch å¯¹è±¡">
    <p>ğŸ  1ã€ åˆ©ç”¨ window.realFetch =  window.fetch; ç¼“å­˜åŸå§‹Fetchå¯¹è±¡
    </p>
    <p> ğŸŒ  2ã€ é‡å†™  fetchå‡½æ•°è°ƒç”¨è¿‡ç¨‹ï¼Œ </p>
    <p>
    ğŸ‡  3ã€ é‡å†™fetchçš„thenæ–¹æ³• ï¼Œå¤„ç†æˆåŠŸä¸ŠæŠ¥ ï¼Œé‡å†™fetch çš„ catchæ–¹æ³•å¤„ç†å¤±è´¥é”™è¯¯ä¸ŠæŠ¥
    </p>

  </Card>

<Image width={"100%"} src={fetchImg} />

  </TabItem>
  <TabItem value="orange" label="å…³é”®ä»£ç è§£æ">

```javascript
window.realFetch = window.realFetch || window.fetch;
window.fetch = function () {
  const args: any = arguments;
  const params = serializeFetchParams(args);

  if (!params.report) {
    const url = params.url ? params.url.split("?")[0] : "";
    store.ajaxCache[url] = params;
    store.fetchLength += 1;
  }
  return window.realFetch
    .apply(this, args)
    .then((response) => {
      // Check that the response is valid and reject an error
      // response to prevent subsequent attempt to parse json
      if (!params.report && !response.ok) {
        //error
        const errorValue: any = {};
        errorValue.t = new Date().getTime();
        errorValue.n = "fetch";
        errorValue.msg = "fetch request error";
        errorValue.method = params.method;
        errorValue.data = {
          resourceUrl: params.url,
          text: "Response not ok with status " + response.status,
          status: response.status,
        };
        store.errorList.push(errorValue);
        reportToLanding(REPORT_TYPE.AJAX);
      }
      return response;
    })
    .then((res) => {
      // ä¸ŠæŠ¥è¯·æ±‚ï¼Œä¸ç»Ÿè®¡
      if (params.report) return res;
      //Done
      try {
        const url = params.url ? params.url.split("?")[0] : "";
        if (store.ajaxCache[url]) {
          store.ajaxCache[url]["options"] = {
            resourceUrl: res.url,
            text: res.statusText,
            status: res.status,
          };

          res
            .clone()
            .text()
            .then((data) => {
              // å¼‚æ­¥ï¼Œéœ€è¦æ•è·é”™è¯¯
              try {
                store.ajaxCache[url]["decodedBodySize"] = data.length;
                store.fetchLoad += 1;
                reportToLanding(REPORT_TYPE.AJAX);
              } catch (e) {
                console.warn(e);
              }
            });
        }
      } catch (e) {}
      return res;
    })
    .catch((err) => {
      // ä¸ŠæŠ¥è¯·æ±‚ï¼Œä¸ç»Ÿè®¡
      if (params.report) return;
      //error
      const errorValue: any = {};
      errorValue.t = new Date().getTime();
      errorValue.n = "fetch";
      errorValue.msg = "fetch request error";
      errorValue.method = params.method;
      errorValue.data = {
        resourceUrl: params.url,
        text: err.stack || err,
        status: 0,
      };
      store.errorList.push(errorValue);
      reportToLanding(REPORT_TYPE.AJAX);
      return err;
    });
};
```

  </TabItem>
</Tabs>

#### å®Œæ•´ä¸ŠæŠ¥åè®®

:::tip

å¯¹äºå‰ç«¯é”™è¯¯å’Œæ€§èƒ½ç›‘æ§æ¥è¯´ï¼Œä¿è¯æ•°æ®çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§æ˜¯éå¸¸é‡è¦çš„ï¼Œè¿™éå¸¸ä¾æ‰˜ä¸ŠæŠ¥æ•°æ®çš„ç¨³å®šæ€§å’Œæ˜ç¡®æ€§ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹è¿™ä»½ä¸ŠæŠ¥åè®®

:::

<Tabs>
  <TabItem value="apple" label="ä¸ŠæŠ¥åè®®" default>

<span style={{ fontSize: "20px", color: "#419128" }}>1ã€ReportData</span>

| ä¸ŠæŠ¥å‚æ•°     | æè¿°               | ç±»å‹                   | ç¤ºä¾‹                       | å¤‡æ³¨                                                                              |
| ------------ | ------------------ | ---------------------- | -------------------------- | --------------------------------------------------------------------------------- |
| appId        | åº”ç”¨å”¯ä¸€æ ‡è¯†       | string                 | ax123dd32233               |                                                                                   |
| domain       | ä¸ŠæŠ¥çš„åœ°å€         | string                 | http://www.athena.com/test |                                                                                   |
| url          | å½“å‰é¡µé¢åœ°å€ url   | string                 | http://www.teest.com/test  |                                                                                   |
| markUser     | ç”¨æˆ·å”¯ä¸€æ ‡è¯†       | string                 | 102346                     |                                                                                   |
| markUv       | ç»Ÿè®¡ UV            | string                 | 102346                     |                                                                                   |
| preUrl       | è¯¥é¡µé¢æ¥è‡ªçš„åŸŸå   | string                 | http://www.athena.com      |                                                                                   |
| performance  | æ€§èƒ½ç›¸å…³æ•°æ®       | Perform                |                            |                                                                                   |
| type         | ä¸ŠæŠ¥ç±»å‹           | number                 | 1                          | PAGE = 1 é¡µé¢çº§æ€§èƒ½ä¸ŠæŠ¥; AJAX = 2 é¡µé¢ API æ€§èƒ½ä¸ŠæŠ¥;ERROR = 3 é¡µé¢å†…é”™è¯¯ä¿¡æ¯ä¸ŠæŠ¥; |
| time         | ä¸ŠæŠ¥æ—¶é—´æˆ³         | number                 | 1638237891804              |                                                                                   |
| screenwidth  | å±å¹•å®½åº¦           | number                 | 1559                       |                                                                                   |
| screenheight | å±å¹•é«˜åº¦           | number                 | 327                        |                                                                                   |
| isFristIn    | æ˜¯å¦ç¬¬ä¸€æ¬¡è¿›å…¥é¡µé¢ | boolean                | false                      |                                                                                   |
| resourceList | èµ„æºç›¸å…³åˆ—è¡¨       | Array&lt;ResourceList> |                            |                                                                                   |
| errorList    | é”™è¯¯åˆ—è¡¨           | Array&lt;ErrorList>    |                            |
|              |

<span style={{ fontSize: "20px", color: "#419128" }}>2ã€ErrorList</span>

| ä¸ŠæŠ¥å‚æ•° | æè¿°       | ç±»å‹      | ç¤ºä¾‹                                                                                                            | å¤‡æ³¨                                   |
| -------- | ---------- | --------- | --------------------------------------------------------------------------------------------------------------- | -------------------------------------- |
| n        | é”™è¯¯ç±»å‹   | string    | resource                                                                                                        | js, resource,ajax // ajax è¯·æ±‚é”™è¯¯ä¸ŠæŠ¥ |
| t        | å½“å‰æ—¶é—´æˆ³ | number    | 1638240521575                                                                                                   |                                        |
| msg      | é”™è¯¯ä¿¡æ¯   | string    | [React Intl] Missing message: \"menu.manage-group\" for locale: \"en-US\", using default message as fallback.// |                                        |
| method   | è¯·æ±‚æ–¹æ³•   | string    | GET                                                                                                             |                                        |
| data     | é™„åŠ ä¿¡æ¯   | ErrorData | <pre>{resourceUrl: "http://localhost:8000/home/15/group"} </pre>                                                |                                        |

<span style={{ fontSize: "20px", color: "#419128" }}>3ã€ErrorData</span>

| ä¸ŠæŠ¥å‚æ•°    | æè¿°           | ç±»å‹   | ç¤ºä¾‹                                 | å¤‡æ³¨         |
| ----------- | -------------- | ------ | ------------------------------------ | ------------ |
| target      | èµ„æºåç§°       | string | script                               | script, link |
| type        | ç±»å‹           | string | error                                |              |
| resourceUrl | æŠ¥é”™èµ„æºåœ°å€   | string | "http://localhost:4005/face/app.css" |              |
| line        | æŠ¥é”™è§¦å‘æ‰€åœ¨è¡Œ | number | 200                                  |              |
| col         | æŠ¥é”™è§¦å‘æ‰€åœ¨åˆ— | number | 12                                   |              |
| stack       | é”™è¯¯æ ˆä¿¡æ¯     | string |                                      |              |
| text        | å“åº”ä¿¡æ¯       | string | OK                                   |              |
| status      | å“åº”çŠ¶æ€ç      | number | 200                                  |              |

<span style={{ fontSize: "20px", color: "#419128" }}>4ã€Perform</span>

| ä¸ŠæŠ¥å‚æ•° | æè¿°              | ç±»å‹   | ç¤ºä¾‹ | å¤‡æ³¨ |
| -------- | ----------------- | ------ | ---- | ---- |
| dnst     | DNS è§£ææ—¶é—´      | number |      |      |
| tcpt     | TCP å»ºç«‹æ—¶é—´      | number |      |      |
| wit      | ç™½å±æ—¶é—´          | number |      |      |
| domt     | dom æ¸²æŸ“å®Œæˆæ—¶é—´  | number |      |      |
| lodt     | é¡µé¢ onload æ—¶é—´  | number |      |      |
| radt     | é¡µé¢å‡†å¤‡æ—¶é—´      | number |      |      |
| rdit     | é¡µé¢é‡å®šå‘æ—¶é—´    | number |      |      |
| uodt     | unload æ—¶é—´       | number |      |      |
| reqt     | request è¯·æ±‚è€—æ—¶  | number |      |      |
| andt     | é¡µé¢è§£æ dom è€—æ—¶ | number |      |      |

<span style={{ fontSize: "20px", color: "#419128" }}>5ã€ResourceList</span>

| ä¸ŠæŠ¥å‚æ•°        | æè¿°     | ç±»å‹            | ç¤ºä¾‹                                   | å¤‡æ³¨                                    |
| --------------- | -------- | --------------- | -------------------------------------- | --------------------------------------- |
| name            | èµ„æºåç§° | string          | http://localhost:8000/@@/devScripts.js |                                         |
| method          | è¯·æ±‚æ–¹æ³• | method          | GET                                    |                                         |
| type            | èµ„æºç±»å‹ | string          | script                                 | script,img,xmlhttprequest, fetchrequest |
| duration        | åŠ è½½æ—¶é—´ | string          | 55.90                                  |                                         |
| decodedBodySize | èµ„æºå¤§å° | number          | 79                                     |                                         |
| nextHopProtocol | åè®®åç§° | string          |                                        |                                         |
| options         | å…¶ä»–é¡¹   | ResourceOptions | { }                                    |                                         |

<span style={{ fontSize: "20px", color: "#419128" }}>6ã€ResourceOptions</span>

| ä¸ŠæŠ¥å‚æ•°    | æè¿°         | ç±»å‹   | ç¤ºä¾‹                                   | å¤‡æ³¨       |
| ----------- | ------------ | ------ | -------------------------------------- | ---------- |
| resourceUrl | èµ„æºåç§°     | string | http://localhost:8000/@@/devScripts.js |            |
| text        | å“åº”çŠ¶æ€æ–‡æœ¬ | string | OK                                     |            |
| status      | å“åº”ç        | number | 200                                    | 200,400... |

  </TabItem>
  <TabItem value="orange" label="æ•°æ®ç¤ºä¾‹">

```javascript
{
  "time": 1638943102743,
  "markUser": "12306",
  "markUv": "rD52Ak2jb4wzJSXa1638893499116",
  "type": 1,
  "url": "http://localhost:4005/monthly",
  "errorList": [
    {
      "t": 1638943095684,
      "n": "js",
      "msg": "Error: äººå·¥è§¦å‘//",
      "data": {
        "resourceUrl": "http://localhost:4005/monthly",
        "stack": "Error: äººå·¥è§¦å‘\n    at http://localhost:4005/static/js/main.chunk.js:3754:19\n    at invokePassiveEffectCreate (http://localhost:4005/static/js/vendors~main.chunk.js:205645:24)\n    at HTMLUnknownElement.callCallback (http://localhost:4005/static/js/vendors~main.chunk.js:186261:18)\n    at Object.invokeGuardedCallbackDev (http://localhost:4005/static/js/vendors~main.chunk.js:186310:20)\n    at invokeGuardedCallback (http://localhost:4005/static/js/vendors~main.chunk.js:186370:35)\n    at flushPassiveEffectsImpl (http://localhost:4005/static/js/vendors~main.chunk.js:205727:13)\n    at unstable_runWithPriority (http://localhost:4005/static/js/vendors~main.chunk.js:236886:16)\n    at runWithPriority$1 (http://localhost:4005/static/js/vendors~main.chunk.js:193667:14)\n    at flushPassiveEffects (http://localhost:4005/static/js/vendors~main.chunk.js:205604:18)\n    at http://localhost:4005/static/js/vendors~main.chunk.js:205485:15\n    at workLoop (http://localhost:4005/static/js/vendors~main.chunk.js:236836:38)\n    at flushWork (http://localhost:4005/static/js/vendors~main.chunk.js:236810:18)\n    at MessagePort.performWorkUntilDeadline (http://localhost:4005/static/js/vendors~main.chunk.js:236576:31)"
      },
      "method": "GET"
    },
    {
      "t": 1638943095700,
      "n": "resource",
      "msg": "script is load error",
      "data": {
        "target": "script",
        "type": "error",
        "resourceUrl": "http://localhost:4005/aaa/index.js"
      },
      "method": "GET"
    },
    {
      "t": 1638943095711,
      "n": "fetch",
      "msg": "fetch request error",
      "method": "GET",
      "data": {
        "resourceUrl": "http://localhost:4005/api1",
        "text": "Response not ok with status 403",
        "status": 403
      }
    },
    {
      "t": 1638943096709,
      "n": "resource",
      "msg": "link is load error",
      "data": {
        "target": "link",
        "type": "error",
        "resourceUrl": "http://localhost:4005/face/app.css"
      },
      "method": "GET"
    },
    {
      "t": 1638943096898,
      "n": "ajax",
      "msg": "{\"message\":\"æœåŠ¡ç«¯é”™è¯¯\"}",
      "method": "GET",
      "data": {
        "resourceUrl": "http://localhost:4005/api5",
        "text": "Internal Server Error",
        "status": 500
      }
    }
  ],
  "domain": "http://localhost:3000/monitor",
  "appId": "12345",
  "outtime": 300,
  "filterUrl": [],
  "isPage": true,
  "isAjax": true,
  "isResource": true,
  "isError": true,
  "request": { "fetch": true },
  "debug": true,
  "uid": "12306",
  "preUrl": "",
  "performance": {
    "dnst": 0,
    "tcpt": 0,
    "wit": 48,
    "domt": 1080,
    "lodt": 1252,
    "radt": 1,
    "rdit": 0,
    "uodt": 0,
    "reqt": 40,
    "andt": 171
  },
  "resourceList": [
    {
      "name": "http://localhost:4005/static/js/bundle.js",
      "method": "GET",
      "type": "script",
      "duration": "30.80",
      "decodedBodySize": 0,
      "nextHopProtocol": "http/1.1",
      "options": ""
    },
    {
      "name": "http://localhost:4005/static/js/vendors~main.chunk.js",
      "method": "GET",
      "type": "script",
      "duration": "118.20",
      "decodedBodySize": 0,
      "nextHopProtocol": "",
      "options": ""
    },
    {
      "name": "http://localhost:4005/static/js/main.chunk.js",
      "method": "GET",
      "type": "script",
      "duration": "128.00",
      "decodedBodySize": 0,
      "nextHopProtocol": "http/1.1",
      "options": ""
    },
    {
      "name": "http://localhost:4005/aaa/index.js",
      "method": "GET",
      "type": "script",
      "duration": "144.30",
      "decodedBodySize": 0,
      "nextHopProtocol": "http/1.1",
      "options": ""
    },
    {
      "name": "http://localhost:4005/aaa/index.js",
      "method": "GET",
      "type": "script",
      "duration": "105.30",
      "decodedBodySize": 0,
      "nextHopProtocol": "http/1.1",
      "options": ""
    },
    {
      "name": "http://localhost:4005/api2",
      "method": "GET",
      "type": "xmlhttprequest",
      "duration": "21.20",
      "decodedBodySize": 15,
      "nextHopProtocol": "",
      "options": {
        "resourceUrl": "http://localhost:4005/api2",
        "text": "OK",
        "status": 200
      }
    },
    {
      "name": "http://localhost:4005/api3",
      "method": "GET",
      "type": "xmlhttprequest",
      "duration": "3015.70",
      "decodedBodySize": 15,
      "nextHopProtocol": "",
      "options": {
        "resourceUrl": "http://localhost:4005/api3",
        "text": "OK",
        "status": 200
      }
    },
    {
      "name": "http://localhost:4005/api1",
      "method": "GET",
      "type": "fetchrequest",
      "duration": "22.80",
      "decodedBodySize": 20,
      "nextHopProtocol": "http/1.1",
      "options": {
        "resourceUrl": "http://localhost:4005/api1",
        "text": "Forbidden",
        "status": 403
      }
    },
    {
      "name": "http://localhost:4005/api3",
      "method": "GET",
      "type": "xmlhttprequest",
      "duration": "6043.10",
      "decodedBodySize": 15,
      "nextHopProtocol": "",
      "options": {
        "resourceUrl": "http://localhost:4005/api3",
        "text": "OK",
        "status": 200
      }
    },
    {
      "name": "http://localhost:4005/api4",
      "method": "GET",
      "type": "xmlhttprequest",
      "duration": "3015.00",
      "decodedBodySize": 15,
      "nextHopProtocol": "",
      "options": {
        "resourceUrl": "http://localhost:4005/api4",
        "text": "OK",
        "status": 200
      }
    },
    {
      "name": "http://localhost:4005/api5",
      "method": "GET",
      "type": "xmlhttprequest",
      "duration": "1037.20",
      "decodedBodySize": 29,
      "nextHopProtocol": "http/1.1",
      "options": {
        "resourceUrl": "http://localhost:4005/api5",
        "text": "Internal Server Error",
        "status": 500
      }
    },
    {
      "name": "http://localhost:4005/manifest.json",
      "method": "GET",
      "type": "other",
      "duration": "16.40",
      "decodedBodySize": 492,
      "nextHopProtocol": "",
      "options": ""
    },
    {
      "name": "http://localhost:4005/favicon.ico",
      "method": "GET",
      "type": "other",
      "duration": "17.30",
      "decodedBodySize": 3870,
      "nextHopProtocol": "",
      "options": ""
    },
    {
      "name": "http://localhost:4005/logo192.png",
      "method": "GET",
      "type": "other",
      "duration": "13.80",
      "decodedBodySize": 5347,
      "nextHopProtocol": "",
      "options": ""
    },
    {
      "name": "http://localhost:4005/face/app.css",
      "method": "GET",
      "type": "link",
      "duration": "16.60",
      "decodedBodySize": 0,
      "nextHopProtocol": "",
      "options": ""
    }
  ],
  "screenwidth": 1623,
  "screenheight": 300,
  "isFristIn": false
}
```

  </TabItem>
</Tabs>

### å››ã€ SDK æ•´ä½“æ¶æ„ä»‹ç»

åŸºäºä»¥ä¸Šçš„å‰æï¼Œæ•…æ­¤äº§ç”Ÿäº†ä¸€ä¸ªå®Œæ•´çš„ SDK æ¶æ„å¦‚ä¸‹

<Image width={"100%"} src={archImg} />

### äº”ã€ å…±äº«-è¾“å‡º npm & å®˜ç½‘å»ºè®¾

#### è¾“å‡º npm

:::info

é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æŠŠæˆ‘ä»¬çš„æˆæœä¸åˆ«äººå…±äº«å‘¢ï¼Œè®©åˆ«äººèƒ½å¤Ÿæ›´å¿«æ·çš„æ¥å…¥å‘¢ï¼Ÿ æ•…æ­¤æˆ‘ä»¬å°è£…æˆä¸€ä¸ª npm åŒ…æ¥ä¾›å¤§å®¶ä½¿ç”¨

:::
1. æ„å»ºå·¥å…·é€‰æ‹©
   TSDX:https://github.com/jaredpalmer/tsdx
2. æ„å»ºå·¥å…·æ”¯æŒ Rollup è¿›è¡Œåº“æ‰“åŒ…ï¼Œå¯ä»¥è¾“å‡ºä¸‰ç§æ¨¡å—ç±»å‹æ–‡ä»¶ï¼Œcjs,esm,umd

#### å®˜ç½‘å»ºè®¾

:::info

å»ºç«‹å®˜ç½‘æœ‰åŠ©äºäº§å“çš„å®£ä¼ ä¸æ¥å…¥ï¼Œå¦‚ä½•é€‰æ‹©æ›´é«˜æ•ˆçš„åˆ›å»ºå®˜ç½‘çš„å·¥å…·ï¼Œå°±å¾ˆé‡è¦ï¼Œæ•…æ­¤ï¼Œæˆ‘è°ƒç ”äº†å¸‚é¢ä¸Šå­˜åœ¨çš„å„ç±»é™æ€ç½‘ç«™ç”Ÿæˆå™¨æ–¹æ¡ˆå¦‚ä¸‹

:::

| æ–¹æ¡ˆ         | ç®€ä»‹                                                                                                                                   | ä¼˜ç‚¹                             | ç¼ºç‚¹                  | åœ°å€                                   | GitHub Star |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------- | --------------------- | -------------------------------------- | ----------- |
| VuePress     | VuePress æ˜¯ä¸€æ¬¾ç”± vue é©±åŠ¨çš„ï¼Œmarkdown ä¸ºé¡¹ç›®ç»“æ„ä¸­å¿ƒçš„é«˜æ€§èƒ½é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œæ˜¯ vue ç”Ÿæ€çš„ç»„æˆéƒ¨åˆ†ï¼Œå¯¹é›†æˆ vue é¡¹ç›®çš„ API æ–‡æ¡£æ¯”è¾ƒå¥‘åˆ | æ”¯æŒ Vue å®šåˆ¶åŒ–                  | å¯¹ React ä¸å‹å¥½       | https://github.com/vuejs/vuepress      | 19.8k       |
| Docusaurus 2 | Docusaurus æ˜¯ Facebook å¼€æºçš„åŸºäº React çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨                                                                               | æ”¯æŒ React å®šåˆ¶åŒ–                | Vue ä¸å‹å¥½            | https://github.com/facebook/docusaurus | 29.5k       |
| GitBook      | GitBook æ˜¯ä¸€æ¬¾å¯å¤šäººåä½œçš„æ–‡æ¡£å¹³å°ï¼Œé¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œé€‚åˆç¼–å†™ API æ¥å£æ–‡æ¡£ä»¥åŠå†…éƒ¨çŸ¥è¯†åº“ï¼Œ                                                | ç®€å•å¿«é€Ÿ                         | UI å±‚é¢çš„è‡ªå®šä¹‰è¾ƒå›°éš¾ | https://github.com/GitbookIO/gitbook   | 24.3k       |
| Gatsby       | Gatsby Gatsby ä¸ä»…ä»…æ˜¯ä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œå®ƒæ›´æ˜¯ä¸€ä¸ª**æ¸è¿›å¼ Web åº”ç”¨ç”Ÿæˆå™¨**                                                          | çµæ´»ï¼Œæ”¯æŒ graphQL,å¯¹ React å‹å¥½ | å¤ªçµæ´»ï¼Œä¸æ˜“ä¸Šæ‰‹      | https://github.com/gatsbyjs/gatsby     | 52.1k       |

åŸºäºçµæ´»æ€§ï¼ŒæŠ€æœ¯æ ˆï¼Œä¸Šæ‰‹éš¾åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©äº† <span style={{fontSize:"20px",color:"#9A0680"}}>Docusaurus</span> ä½œä¸ºæˆ‘ä»¬å®˜ç½‘çš„å»ºç«™å·¥å…·ï¼Œä¹Ÿå°±æ˜¯è¿™ç¯‡åšå®¢æ‰€åœ¨çš„é¡µé¢

