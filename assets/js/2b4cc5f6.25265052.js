"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1440],{6982:(e,n,a)=>{a.d(n,{A:()=>r});var s=a(6540);const r=function(e){let{children:n,hidden:a,className:r}=e;return s.createElement("div",{role:"tabpanel",hidden:a,className:r},n)}},3593:(e,n,a)=>{a.d(n,{A:()=>d});var s=a(8168),r=a(6540),t=a(2303),l=a(8555);const o=function(){const e=(0,r.useContext)(l.A);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e};var i=a(5965),c=a(53);const u={tabItem:"tabItem_vU9c"};function m(e){const{lazy:n,block:a,defaultValue:s,values:t,groupId:l,className:m}=e,d=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),p=t??d.map((e=>{let{props:{value:n,label:a}}=e;return{value:n,label:a}})),v=(0,i.XI)(p,((e,n)=>e.value===n.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const h=null===s?s:s??d.find((e=>e.props.default))?.props.value??d[0]?.props.value;if(null!==h&&!p.some((e=>e.value===h)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${h}" but none of its children has the corresponding value. Available values are: ${p.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:b,setTabGroupChoices:y}=o(),[f,g]=(0,r.useState)(h),k=[],{blockElementScrollPositionUntilNextRender:P}=(0,i.a_)();if(null!=l){const e=b[l];null!=e&&e!==f&&p.some((n=>n.value===e))&&g(e)}const C=e=>{const n=e.currentTarget,a=k.indexOf(n),s=p[a].value;s!==f&&(P(n),g(s),null!=l&&y(l,s))},x=e=>{let n=null;switch(e.key){case"ArrowRight":{const a=k.indexOf(e.currentTarget)+1;n=k[a]||k[0];break}case"ArrowLeft":{const a=k.indexOf(e.currentTarget)-1;n=k[a]||k[k.length-1];break}}n?.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.A)("tabs",{"tabs--block":a},m)},p.map((e=>{let{value:n,label:a}=e;return r.createElement("li",{role:"tab",tabIndex:f===n?0:-1,"aria-selected":f===n,className:(0,c.A)("tabs__item",u.tabItem,{"tabs__item--active":f===n}),key:n,ref:e=>k.push(e),onKeyDown:x,onFocus:C,onClick:C},a??n)}))),n?(0,r.cloneElement)(d.filter((e=>e.props.value===f))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},d.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==f})))))}function d(e){const n=(0,t.A)();return r.createElement(m,(0,s.A)({key:String(n)},e))}},493:(e,n,a)=>{a.d(n,{A:()=>s});const s=a(6540).createContext(void 0)},8555:(e,n,a)=>{a.d(n,{A:()=>s});const s=(0,a(6540).createContext)(void 0)},4785:(e,n,a)=>{a.d(n,{A:()=>t});var s=a(6540),r=a(493);const t=function(){const e=(0,s.useContext)(r.A);if(null==e)throw new Error('"useThemeContext" is used outside of "Layout" component. Please see https://docusaurus.io/docs/api/themes/configuration#usethemecontext.');return e}},8805:(e,n,a)=>{a.r(n),a.d(n,{contentTitle:()=>u,default:()=>h,frontMatter:()=>c,metadata:()=>m,toc:()=>d});var s=a(8168),r=(a(6540),a(5680)),t=a(3593),l=a(6982),o=a(2619);const i="const PENDING = 'pending'; // \u7b49\u5f85\nconst FULFILLED = 'fulfilled'; // \u6210\u529f\nconst REJECTED = 'rejected'; //\u5931\u8d25\nclass MyPromise {\n  constructor(executor) {\n    // \u6355\u83b7\u6267\u884c\u5668\u9519\u8bef\n    try {\n      executor(this.resolve, this.reject);\n    } catch (error) {\n      this.reject(error);\n    }\n  }\n  status = PENDING;\n  // \u6210\u529f\u4e4b\u540e\u7684\u503c\n  value = undefined;\n  // \u5931\u8d25\u4e4b\u540e\u7684\u503c\n  reason = undefined;\n  //\u6210\u529f\u56de\u8c03\n  successCallback = [];\n  // \u5931\u8d25\u56de\u8c03\n  failCallback = [];\n\n  resolve = (value) => {\n    // \u5982\u679c\u72b6\u6001\u4e0d\u662f\u7b49\u5f85\uff0c\u963b\u6b62\u7a0b\u5e8f\u5411\u4e0b\u6267\u884c\n    if (this.status !== PENDING) return;\n    // \u5c06\u72b6\u6001\u66f4\u6539\u4e3a\u6210\u529f\n    this.status = FULFILLED;\n    this.value = value;\n    // \u5224\u65ad\u6210\u529f\u56de\u8c03\u8fd8\u5426\u5b58\u5728\n    //this.successCallback.length && this.successCallback(value);\n    while (this.successCallback.length) {\n      this.successCallback.shift()();\n    }\n  };\n  reject = (reason) => {\n    // \u5982\u679c\u72b6\u6001\u4e0d\u662f\u7b49\u5f85\uff0c\u963b\u6b62\u7a0b\u5e8f\u5411\u4e0b\u6267\u884c\n    if (this.status !== PENDING) return;\n    // \u5c06\u72b6\u6001\u66f4\u6539\u4e3a\u5931\u8d25\n    this.status = REJECTED;\n    this.reason = reason;\n    // \u5224\u65ad\u5931\u8d25\u56de\u8c03\u8fd8\u5426\u5b58\u5728\n    //this.failCallback && this.failCallback(this.reason);\n    while (this.failCallback.length) {\n      this.failCallback.shift()();\n    }\n  };\n  then(successCallback, failCallback) {\n    successCallback = successCallback ? successCallback : (value) => value;\n    failCallback = failCallback\n      ? failCallback\n      : (reason) => {\n          throw reason;\n        };\n    const promise2 = new MyPromise((resolve, reject) => {\n      if (this.status === FULFILLED) {\n        setTimeout(() => {\n          try {\n            const x = successCallback(this.value);\n            // \u5224\u65adx \u662f\u666e\u901a\u503c\uff0c\u8fd8\u662fpromise \u5bf9\u8c61\n            // \u5982\u679c\u662f\u666e\u901a\u503c\uff0c\u76f4\u63a5\u8c03\u7528resolve\n            // \u5982\u679c\u662fpromise \u5bf9\u8c61\uff0c\u67e5\u770bpromise \u7684\u8fd4\u56de\u7ed3\u679c\n            // \u518d\u6839\u636epromise \u5bf9\u8c61\u7684\u8fd4\u56de\u7ed3\u679c \u51b3\u5b9a\u8c03\u7528resolve \u8fd8\u662f\u8c03\u7528reject\n            resolvePromise(promise2, x, resolve, reject);\n          } catch (error) {\n            reject(error);\n          }\n        }, 0);\n      } else if (this.status === REJECTED) {\n        setTimeout(() => {\n          try {\n            failCallback(this.reason);\n            resolvePromise(promise2, x, resolve, reject);\n          } catch (error) {\n            reject(error);\n          }\n        }, 0);\n      } else {\n        // \u5c06\u6210\u529f\u56de\u8c03\u548c\u5931\u8d25\u56de\u8c03\u5b58\u50a8\u8d77\u6765\n        this.successCallback.push(() => {\n          setTimeout(() => {\n            try {\n              const x = successCallback(this.value);\n              // \u5224\u65adx \u662f\u666e\u901a\u503c\uff0c\u8fd8\u662fpromise \u5bf9\u8c61\n              // \u5982\u679c\u662f\u666e\u901a\u503c\uff0c\u76f4\u63a5\u8c03\u7528resolve\n              // \u5982\u679c\u662fpromise \u5bf9\u8c61\uff0c\u67e5\u770bpromise \u7684\u8fd4\u56de\u7ed3\u679c\n              // \u518d\u6839\u636epromise \u5bf9\u8c61\u7684\u8fd4\u56de\u7ed3\u679c \u51b3\u5b9a\u8c03\u7528resolve \u8fd8\u662f\u8c03\u7528reject\n              resolvePromise(promise2, x, resolve, reject);\n            } catch (error) {\n              reject(error);\n            }\n          }, 0);\n        });\n        this.failCallback.push(() => {\n          setTimeout(() => {\n            try {\n              failCallback(this.reason);\n              resolvePromise(promise2, x, resolve, reject);\n            } catch (error) {\n              reject(error);\n            }\n          }, 0);\n        });\n      }\n    });\n\n    return promise2;\n  }\n  finally(callback) {\n    return this.then(\n      (value) => {\n        return MyPromise.resolve(callback()).then(() => value);\n      },\n      (reason) => {\n        return MyPromise.resolve(callback()).then(() => {\n          throw reason;\n        });\n      },\n    );\n  }\n  catch(failCallback) {\n    return this.then(undefined, failCallback);\n  }\n  static all(array) {\n    let result = [];\n    let index = 0;\n\n    return new MyPromise((resolve, reject) => {\n      for (let i = 0; i < array.length; i++) {\n        const current = array[i];\n        if (current instanceof MyPromise) {\n          // promise \u5bf9\u8c61\n          current.then(\n            (value) => addData(i, value),\n            (reason) => reject(reason),\n          );\n        } else {\n          // \u666e\u901a\u503c\n          addData(i, current);\n        }\n      }\n      function addData(key, value) {\n        result[key] = value;\n        index++;\n        if (index === array.length) {\n          resolve(result);\n        }\n      }\n    });\n  }\n  static resolve(value) {\n    if (value instanceof MyPromise) return value;\n    return new MyPromise((resolve) => resolve(value));\n  }\n}\nfunction resolvePromise(promise2, x, resolve, reject) {\n  if (promise2 === x) {\n    return reject(new TypeError('Chaining cycle detected for promise #<Promise>'));\n  }\n  if (x instanceof MyPromise) {\n    // promise \u5bf9\u8c61\n    x.then(resolve, reject);\n  } else {\n    // \u666e\u901a\u503c\n    resolve(x);\n  }\n}\nmodule.exports = MyPromise;\n",c={sidebar_position:1,title:"Promise \u65b9\u6848",tags:["JavaScript","Async"]},u=void 0,m={unversionedId:"tutorial-basics/jsasync",id:"tutorial-basics/jsasync",isDocsHomePage:!1,title:"Promise \u65b9\u6848",description:"promise \u5168\u89e3\u6790",source:"@site/docs/tutorial-basics/jsasync.mdx",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/jsasync",permalink:"/myblog/docs/tutorial-basics/jsasync",tags:[{label:"JavaScript",permalink:"/myblog/docs/tags/java-script"},{label:"Async",permalink:"/myblog/docs/tags/async"}],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Promise \u65b9\u6848",tags:["JavaScript","Async"]},sidebar:"tutorialSidebar",previous:{title:"Javascript \u57fa\u7840",permalink:"/myblog/docs/intro"},next:{title:"Async Await \u65b9\u6848",permalink:"/myblog/docs/tutorial-basics/async-await"}},d=[{value:"promise \u5168\u89e3\u6790",id:"promise-\u5168\u89e3\u6790",children:[{value:"\u4e00\u3001\u4ec0\u4e48\u662fPromise?",id:"\u4e00\u4ec0\u4e48\u662fpromise",children:[],level:3},{value:"\u4e8c\u3001Promise \u90fd\u6709\u54ea\u4e9b\u5b9e\u4f8b\u65b9\u6cd5",id:"\u4e8cpromise-\u90fd\u6709\u54ea\u4e9b\u5b9e\u4f8b\u65b9\u6cd5",children:[],level:3},{value:"\u4e09\u3001Promise \u90fd\u6709\u54ea\u4e9b\u9759\u6001\u65b9\u6cd5",id:"\u4e09promise-\u90fd\u6709\u54ea\u4e9b\u9759\u6001\u65b9\u6cd5",children:[],level:3},{value:"\u56db\u3001\u624b\u52a8\u5b9e\u73b0\u4e00\u4e2a Promise",id:"\u56db\u624b\u52a8\u5b9e\u73b0\u4e00\u4e2a-promise",children:[],level:3}],level:2}],p={toc:d},v="wrapper";function h(e){let{components:n,...a}=e;return(0,r.yg)(v,(0,s.A)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"promise-\u5168\u89e3\u6790"},"promise \u5168\u89e3\u6790"),(0,r.yg)("h3",{id:"\u4e00\u4ec0\u4e48\u662fpromise"},"\u4e00\u3001\u4ec0\u4e48\u662fPromise?"),(0,r.yg)("h3",{id:"\u4e8cpromise-\u90fd\u6709\u54ea\u4e9b\u5b9e\u4f8b\u65b9\u6cd5"},"\u4e8c\u3001Promise \u90fd\u6709\u54ea\u4e9b\u5b9e\u4f8b\u65b9\u6cd5"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"catch()"),(0,r.yg)("li",{parentName:"ul"},"finally()"),(0,r.yg)("li",{parentName:"ul"},"then()")),(0,r.yg)("h3",{id:"\u4e09promise-\u90fd\u6709\u54ea\u4e9b\u9759\u6001\u65b9\u6cd5"},"\u4e09\u3001Promise \u90fd\u6709\u54ea\u4e9b\u9759\u6001\u65b9\u6cd5"),(0,r.yg)(t.A,{mdxType:"Tabs"},(0,r.yg)(l.A,{value:"apple",label:"Promise.all",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"\u5f53\u6240\u6709 Promise \u90fd resolve \u65f6\uff0c\u8fd4\u56de\u6570\u7ec4\u7ed3\u679c\uff0c\u4efb\u4f55\u4e00\u4e2aPromise reject \u65f6\uff0c\u8fd4\u56dereject \u4fe1\u606f\ud83c\udf4e\n"))),(0,r.yg)(l.A,{value:"orange",label:"Promise.race",mdxType:"TabItem"},"This is an orange \ud83c\udf4a"),(0,r.yg)(l.A,{value:"banana1",label:"Promise.any",mdxType:"TabItem"},"This is a banana \ud83c\udf4c"),(0,r.yg)(l.A,{value:"banana2",label:"Promise.allSettled",mdxType:"TabItem"},"This is a banana \ud83c\udf4c"),(0,r.yg)(l.A,{value:"banana3",label:"Promise.reject",mdxType:"TabItem"},"This is a banana \ud83c\udf4c"),(0,r.yg)(l.A,{value:"banana4",label:"Promise.resolve",mdxType:"TabItem"},"This is a banana \ud83c\udf4c")),(0,r.yg)("h3",{id:"\u56db\u624b\u52a8\u5b9e\u73b0\u4e00\u4e2a-promise"},"\u56db\u3001\u624b\u52a8\u5b9e\u73b0\u4e00\u4e2a Promise"),(0,r.yg)(o.A,{className:"language-jsx",title:"Promise \u539f\u7406\u5b9e\u73b0",mdxType:"CodeBlock"},i))}h.isMDXComponent=!0}}]);